{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "App.svelte",
    "Countdown.svelte",
    "InGame.svelte"
  ],
  "sourcesContent": [
    "<script lang=\"ts\">import { questionSets } from \"../stores\";\nimport MainMenu from \"./MainMenu.svelte\";\nimport InGame from \"./InGame.svelte\";\nimport PostGame from \"./PostGame.svelte\";\nimport { onMount } from \"svelte\";\nimport { selectQuestionsForGame } from \"../questions\";\n;\nimport { fetchQuestions } from \"../spreadsheetApi\";\nimport { questionsInGame } from \"../gameSettings\";\nconst defaultSheet = \"БГ 1-6\";\nonMount(async () => {\n    $questionSets = {\n        default: selectQuestionsForGame(await fetchQuestions(defaultSheet), questionsInGame, []),\n    };\n});\nlet gameStage = \"MAIN-MENU\";\nlet selectedQuestions;\nlet gameResult;\nconst startGame = ({ detail }) => {\n    selectedQuestions = $questionSets.default;\n    gameStage = \"IN-GAME\";\n};\nconst endGame = ({ detail }) => {\n    gameResult = detail;\n    gameStage = \"POST-GAME\";\n};\n</script>\n\n<style>\n  main {\n    text-align: center;\n    padding: 1em;\n    max-width: 240px;\n    margin: 0 auto;\n  }\n\n  h1 {\n    color: #ff3e00;\n    text-transform: uppercase;\n    font-size: 4em;\n    font-weight: 100;\n  }\n\n  @media (min-width: 640px) {\n    main {\n      max-width: none;\n    }\n  }\n</style>\n\n<main>\n  {#if gameStage === 'IN-GAME'}\n    <InGame {selectedQuestions} on:endGame={endGame} />\n  {:else if gameStage === 'POST-GAME'}\n    <PostGame {gameResult} on:playAgain={startGame} />\n  {:else}\n    <MainMenu on:startGame={startGame} />\n  {/if}\n</main>\n",
    "<script lang=\"ts\">import { createEventDispatcher, onMount } from \"svelte\";\nconst dispatch = createEventDispatcher();\nexport let value;\nexport let tickMillis = 1000;\nexport let blinkAt = 5;\nexport let stopAt = 1;\nexport const reset = (newValue) => {\n    clearInterval(interval);\n    value = newValue;\n    interval = setInterval(tick, tickMillis);\n};\nconst tick = () => {\n    if (value === stopAt)\n        return dispatch(\"expire\");\n    value -= 1;\n};\nlet interval;\nonMount(() => {\n    interval = setInterval(tick, tickMillis);\n    return () => clearInterval(interval);\n});\n</script>\n\n<style>\n  .blinking {\n    color: red;\n    animation: blinker 0.75s linear infinite;\n  }\n  @keyframes blinker {\n    50% {\n      opacity: 0;\n    }\n  }\n</style>\n\n<h3 class={value > blinkAt ? '' : 'blinking'}>{value}</h3>\n",
    "<script lang=\"ts\">;\nimport { createEventDispatcher } from \"svelte\";\nimport { timeToSelectAnswer } from \"../gameSettings\";\nimport Countdown from \"./Countdown.svelte\";\nimport { randomElement } from \"../util\";\nconst dispatch = createEventDispatcher();\nexport let selectedQuestions;\nlet currentQuestionNumber = 1;\nlet currentQuestion = selectedQuestions[0];\nlet timer;\n// for fifty-fifty\nlet choiceActive = {\n    1: true,\n    3: true,\n    2: true,\n    4: true,\n};\nconst HelperOption = (displayName, handler) => ({\n    displayName,\n    handler,\n    available: true,\n});\nlet helpOptions = {\n    fiftyFifty: HelperOption(\"50/50\", () => {\n        const incorrectChoices = Object.keys(currentQuestion.answerChoices).filter((choiceId) => choiceId !== currentQuestion.correctAnswerId.toString());\n        const choiceToLeave = randomElement(incorrectChoices);\n        incorrectChoices.forEach((choiceId) => {\n            if (choiceId !== choiceToLeave)\n                choiceActive[choiceId] = false;\n        });\n        // TODO: kek?\n        const _nextQuestion = nextQuestion;\n        nextQuestion = () => {\n            choiceActive = {\n                1: true,\n                3: true,\n                2: true,\n                4: true,\n            };\n            _nextQuestion();\n            nextQuestion = _nextQuestion;\n        };\n        helpOptions.fiftyFifty.available = false;\n    }),\n};\nlet nextQuestion = () => {\n    currentQuestion = selectedQuestions[currentQuestionNumber];\n    currentQuestionNumber += 1;\n    timer.reset(timeToSelectAnswer);\n};\nconst endGame = (outcome) => {\n    let details;\n    switch (outcome) {\n        case Outcomes.WIN:\n            details = { win: true };\n            break;\n        case Outcomes.INCORRECT_ANSWER:\n            details = { win: false, failedQuestion: currentQuestion, questionNumber: currentQuestionNumber };\n            break;\n        case Outcomes.TIME_EXPIRED:\n            details = { win: false, failedQuestion: currentQuestion, questionNumber: currentQuestionNumber };\n            break;\n    }\n    dispatch(\"endGame\", details);\n};\nvar Outcomes;\n(function (Outcomes) {\n    Outcomes[Outcomes[\"WIN\"] = 0] = \"WIN\";\n    Outcomes[Outcomes[\"INCORRECT_ANSWER\"] = 1] = \"INCORRECT_ANSWER\";\n    Outcomes[Outcomes[\"TIME_EXPIRED\"] = 2] = \"TIME_EXPIRED\";\n})(Outcomes || (Outcomes = {}));\nconst handleChoice = (e) => {\n    if (`choice-${currentQuestion.correctAnswerId}` !== e.target.id)\n        return endGame(Outcomes.INCORRECT_ANSWER);\n    if (currentQuestionNumber === selectedQuestions.length)\n        return endGame(Outcomes.WIN);\n    nextQuestion();\n};\n</script>\n\n<style>\n  pre {\n    color: orange;\n  }\n</style>\n\n<div>\n  <pre>Вопрос #{currentQuestionNumber}</pre>\n  <pre>{currentQuestion.questionText}</pre>\n  {#each currentQuestion.answerChoices as choice}\n    <button on:click={handleChoice} id=\"choice-{choice.id}\" disabled={!choiceActive[choice.id]}>{choice.value}</button>\n  {/each}\n  <Countdown value={timeToSelectAnswer} bind:this={timer} on:expire={() => endGame(Outcomes.TIME_EXPIRED)} />\n  <hr />\n  {#each Object.entries(helpOptions) as [key, { available, handler, displayName }]}\n    <button on:click={handler} disabled={!available} id={key}>{displayName}</button>\n  {/each}\n</div>\n"
  ],
  "names": [],
  "mappings": "AA6BE,IAAI,eAAC,CAAC,AACJ,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,GAAG,CACZ,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,CAAC,CAAC,IAAI,AAChB,CAAC,AASD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,IAAI,eAAC,CAAC,AACJ,SAAS,CAAE,IAAI,AACjB,CAAC,AACH,CAAC;ACvBD,SAAS,eAAC,CAAC,AACT,KAAK,CAAE,GAAG,CACV,SAAS,CAAE,sBAAO,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,AAC1C,CAAC,AACD,WAAW,sBAAQ,CAAC,AAClB,GAAG,AAAC,CAAC,AACH,OAAO,CAAE,CAAC,AACZ,CAAC,AACH,CAAC;ACiDD,GAAG,eAAC,CAAC,AACH,KAAK,CAAE,MAAM,AACf,CAAC"
}